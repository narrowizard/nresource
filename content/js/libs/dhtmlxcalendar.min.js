function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}function dhtmlxEvent(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}function dhtmlXCalendarObject(t,e){this.i={};var n=null;if("string"==typeof t)var i=document.getElementById(t);else var i=t;i&&"object"==typeof i&&i.tagName&&"input"!=String(i.tagName).toLowerCase()&&(n=i),i=null,"object"==typeof t&&t.length||(t=[t]);for(var s=0;s<t.length;s++)"string"==typeof t[s]&&(t[s]=document.getElementById(t[s])||null),null!=t[s]&&t[s].tagName&&"input"==String(t[s].tagName).toLowerCase()?this.i[window.dhx4.newId()]={input:t[s]}:t[s]instanceof Array||!(t[s]instanceof Object)||null==t[s].input&&null==t[s].button||(null!=t[s].input&&"string"==typeof t[s].input&&(t[s].input=document.getElementById(t[s].input)),null!=t[s].button&&"string"==typeof t[s].button&&(t[s].button=document.getElementById(t[s].button)),this.i[window.dhx4.newId()]=t[s]),t[s]=null;this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"dhx_skyblue",zi:window.dhx4.newId(),touch:!window.dhx4.isIE,time:!0,today:!1,ws_first:!0},this.setSkin=function(t,e){(this.conf.skin!=t||e)&&(this.conf.skin=t,this.base.className="dhtmlxcalendar_"+this.conf.skin,this._ifrSize())},this.base=document.createElement("DIV"),this.base.style.display="none",this.base.appendChild(document.createElement("DIV")),null!=n?(this._hasParent=!0,n.appendChild(this.base),n=null):document.body.appendChild(this.base),this.setParent=function(t){this._hasParent&&("object"==typeof t?t.appendChild(this.base):"string"==typeof t&&document.getElementById(t).appendChild(this.base))},this.setSkin(this.conf.skin,!0),this.base.onclick=function(t){t=t||event,t.preventDefault&&t.preventDefault(),t.cancelBubble=!0},this.base.onmousedown=function(){return!1},this.conf.touch&&(this.base.ontouchstart=this.base.onclick),this.loadUserLanguage=function(t){if(this.langData[t]&&(this.lang=t,this.setWeekStartDay(this.langData[this.lang].weekstart),this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this.msCont))for(var e=0,n=0;n<this.msCont.childNodes.length;n++)for(var i=0;i<this.msCont.childNodes[n].childNodes.length;i++)this.msCont.childNodes[n].childNodes[i].innerHTML=this.langData[this.lang].monthesSNames[e++]},this.contMonth=document.createElement("DIV"),this.contMonth.className="dhtmlxcalendar_month_cont",this.contMonth.onselectstart=function(t){return t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this.base.firstChild.appendChild(this.contMonth);var a=document.createElement("UL");a.className="dhtmlxcalendar_line",this.contMonth.appendChild(a);var l=document.createElement("LI");l.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr",l.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span></span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>",a.appendChild(l);var o=this;l.onclick=function(t){t=t||event,"touchstart"==t.type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;if(e.className&&0===e.className.indexOf("dhtmlxcalendar_month_arrow")){o._hideSelector();var n=e.parentNode.firstChild==e?-1:1,i=new Date(o._activeMonth);return o._drawMonth(new Date(o._activeMonth.getFullYear(),o._activeMonth.getMonth()+n,1,0,0,0,0)),void o._evOnArrowClick([i,new Date(o._activeMonth)])}return e.className&&"dhtmlxcalendar_month_label_month"==e.className?(t.cancelBubble=!0,void o._showSelector("month",Math.round(e.offsetLeft+e.offsetWidth/2),e.offsetTop+e.offsetHeight+2,"selector_month",!0)):e.className&&"dhtmlxcalendar_month_label_year"==e.className?(t.cancelBubble=!0,void o._showSelector("year",Math.round(e.offsetLeft+e.offsetWidth/2),e.offsetTop+e.offsetHeight+2,"selector_year",!0)):void o._hideSelector()},1==this.conf.touch&&(l.ontouchstart=l.onclick),this.contDays=document.createElement("DIV"),this.contDays.className="dhtmlxcalendar_days_cont",this.base.firstChild.appendChild(this.contDays),this.setWeekStartDay=function(t){0==t&&(t=7),this._wStart=Math.min(Math.max(isNaN(t)?1:t,1),7),this._drawDaysOfWeek()},this._drawDaysOfWeek=function(){if(0==this.contDays.childNodes.length){var t=document.createElement("UL");t.className="dhtmlxcalendar_line",this.contDays.appendChild(t)}else var t=this.contDays.firstChild;var e=this._wStart,n=this.langData[this.lang].daysSNames;n.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var i=0;8>i;i++){if(null==t.childNodes[i]){var s=document.createElement("LI");t.appendChild(s)}else var s=t.childNodes[i];0==i?(s.className="dhtmlxcalendar_cell_wn",s.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"</div>"):(s.className="dhtmlxcalendar_cell"+(e>=6?" dhtmlxcalendar_day_weekday_cell":"")+(1==i?"_first":""),s.innerHTML=n[e],++e>7&&(e=1))}null!=this._activeMonth&&this._drawMonth(this._activeMonth)},this._wStart=this.langData[this.lang].weekstart,this.setWeekStartDay(this._wStart),this.contDates=document.createElement("DIV"),this.contDates.className="dhtmlxcalendar_dates_cont",this.base.firstChild.appendChild(this.contDates),this.contDates.onclick=function(t){t=t||event,"touchstart"==t.type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;if(null!=e.parentNode&&null!=e.parentNode._date&&(e=e.parentNode),null!=e._date&&!e._css_dis){var n=o._activeDate.getHours(),i=o._activeDate.getMinutes(),s=e._date;if(o.checkEvent("onBeforeChange")&&!o.callEvent("onBeforeChange",[new Date(e._date.getFullYear(),e._date.getMonth(),e._date.getDate(),n,i)]))return;null!=o._activeDateCell&&(o._activeDateCell._css_date=!1,o._updateCellStyle(o._activeDateCell._q,o._activeDateCell._w));var a=o._activeDate.getFullYear()+"_"+o._activeDate.getMonth()!=s.getFullYear()+"_"+s.getMonth();o._nullDate=!1,o._activeDate=new Date(s.getFullYear(),s.getMonth(),s.getDate(),n,i),o._activeDateCell=e,o._activeDateCell._css_date=!0,o._activeDateCell._css_hover=!1,o._updateCellStyle(o._activeDateCell._q,o._activeDateCell._w),a&&o._drawMonth(o._activeDate),o._activeInp&&o.i[o._activeInp]&&null!=o.i[o._activeInp].input&&(o.i[o._activeInp].input.value=o._dateToStr(new Date(o._activeDate.getTime()))),o._hasParent||("touchstart"==t.type?window.setTimeout(function(){o._hide()},400):o._hide()),o._evOnClick([new Date(o._activeDate.getTime())])}},1==this.conf.touch&&(this.contDates.ontouchstart=this.contDates.onclick),this.contDates.onmouseover=function(t){t=t||event;var e=t.target||t.srcElement;if(null!=e.parentNode&&null!=e.parentNode._date&&(e=e.parentNode),null!=e._date){if(o._lastHover==e||e._css_hover)return;e._css_hover=!0,o._updateCellStyle(e._q,e._w),o._lastHover=e,o._evOnMouseOver([new Date(e._date.getFullYear(),e._date.getMonth(),e._date.getDate(),0,0,0,0),t]),e=null}},this.contDates.onmouseout=function(t){o._clearDayHover(t||event)},this._lastHover=null,this._clearDayHover=function(t){this._lastHover&&(this._lastHover._css_hover=!1,this._updateCellStyle(this._lastHover._q,this._lastHover._w),null!=t&&o._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),t]),this._lastHover=null)};for(var s=0;6>s;s++){var a=document.createElement("UL");a.className="dhtmlxcalendar_line",this.contDates.appendChild(a);for(var r=0;7>=r;r++){var l=document.createElement("LI");0==r?l.className="dhtmlxcalendar_cell_wn":l.className="dhtmlxcalendar_cell",a.appendChild(l)}}this.contTime=document.createElement("DIV"),this.contTime.className="dhtmlxcalendar_time_cont",this.contTime.style.display="none",this.base.firstChild.appendChild(this.contTime),this.showTime=function(){1!=this.conf.time&&(this.conf.time=!0,this._adjustTimeCont())},this.hideTime=function(){1==this.conf.time&&(this.conf.time=!1,this._adjustTimeCont())},this.showToday=function(){1!=this.conf.today&&(this.conf.today=!0,this._adjustTimeCont())},this.hideToday=function(){1==this.conf.today&&(this.conf.today=!1,this._adjustTimeCont())},this._adjustTimeCont=function(){var t="";1==this.conf.time&&(t+="_time"),1==this.conf.today&&(t+="_today"),""==t?this.contTime.style.display="none":(this.contTime.className="dhtmlxcalendar_time_cont dhtmlxcalendar_mode"+t,this.contTime.style.display=""),this._ifrSize()},this._adjustTimeCont();var a=document.createElement("UL");a.className="dhtmlxcalendar_line",this.contTime.appendChild(a);var l=document.createElement("LI");l.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr",l.innerHTML="<div class='dhtmlxcalendar_time_img'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'> : </span><span class='dhtmlxcalendar_label_minutes'></span><span class='dhtmlxcalendar_label_clear'>Clear</span><span class='dhtmlxcalendar_label_today'>Today</span>",a.appendChild(l),l.onclick=function(t){t=t||event,"touchstart"==t.type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;if(null!=e.tagName&&"span"==e.tagName.toLowerCase()&&1==e._par&&null!=e.parentNode&&(e=e.parentNode),e.className&&"dhtmlxcalendar_label_hours"==e.className){t.cancelBubble=!0;var n=o.contMonth.offsetHeight+o.contDays.offsetHeight+o.contDates.offsetHeight+e.offsetTop;return void o._showSelector("hours",Math.round(e.offsetLeft+e.offsetWidth/2),n-2,"selector_hours",!0)}if(e.className&&"dhtmlxcalendar_label_minutes"==e.className){if(t.cancelBubble=!0,1==o._minutesInterval){var i=o.getFormatedDate("%i");e.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+i.charAt(0)+"</span>"+i.charAt(1),e.firstChild._par=!0,o._selectorMode=1}var n=o.contMonth.offsetHeight+o.contDays.offsetHeight+o.contDates.offsetHeight+e.offsetTop;return void o._showSelector("minutes",Math.round(e.offsetLeft+e.offsetWidth/2),n-2,"selector_minutes",!0)}if(o._hideSelector(),e.className&&"dhtmlxcalendar_label_today"==e.className){var i=new Date;i.setHours(o._activeDate.getHours()),i.setMinutes(o._activeDate.getMinutes()),i.setSeconds(o._activeDate.getSeconds()),o.setDate(i)}e.className&&"dhtmlxcalendar_label_clear"==e.className&&(o._nullDate=!0,o._drawMonth(new Date))},1==this.conf.touch&&(l.ontouchstart=l.onclick),this._activeMonth=null,this._activeDate=new Date,this._activeDateCell=null,this.setDate=function(t){window.dhx4.temp_calendar={tz:null},this._nullDate="undefined"==typeof t||""===t||!t,t instanceof Date||(t=this._strToDate(String(t||"")),"Invalid Date"==t?t=new Date:this.conf.tz=window.dhx4.temp_calendar.tz,window.dhx4.temp_calendar=null),null==this.conf.tz&&(this.conf.tz=window.dhx4.date2str(t,"%P"));var e=t.getTime();this._isOutOfRange(e)||(this._activeDate=new Date(e),this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleHours(),this._updateVisibleMinutes())},this.getDate=function(t){if(this._nullDate)return null;var e=new Date(this._activeDate.getTime());if(t){window.dhx4.temp_calendar={tz:this.conf.tz};var n=this._dateToStr(e);return window.dhx4.temp_calendar=null,n}return e},this._drawMonth=function(t){if(t instanceof Date){isNaN(t.getFullYear())&&(t=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)),this._activeMonth=new Date(t.getFullYear(),t.getMonth(),1,0,0,0,0),this._activeDateCell=null;var e=new Date(this._activeMonth.getTime()),n=e.getDay(),i=n-this._wStart;0>i&&(i+=7),e.setDate(e.getDate()-i);for(var s=t.getMonth(),a=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime(),l=0,o=0;6>o;o++)for(var r=this._wStart,h=0;7>=h;h++)if(0==h){var d=this.getWeekNumber(new Date(e.getFullYear(),e.getMonth(),e.getDate()+l,0,0,0,0));if(d>=52&&1==this.conf.ws_first&&0==this._activeMonth.getMonth()){var c=this.getWeekNumber(new Date(e.getFullYear(),e.getMonth(),e.getDate()+l+7,0,0,0,0));d>c&&c>1&&(d=1)}this.contDates.childNodes[o].childNodes[h].innerHTML="<div class='dhtmlxcalendar_label'>"+d+"</div>"}else{var u=new Date(e.getFullYear(),e.getMonth(),e.getDate()+l,0,0,0,0);if(0!=u.getHours()){var _=u.getHours()>12?24-u.getHours():u.getHours();u.setTime(u.getTime()+36e5*_)}var f=(u.getDay(),u.getTime()),m="dhtmlxcalendar_label";null!=this._tipData[f]?(this._tipData[f].usePopup&&"function"==typeof window.dhtmlXPopup?(this.contDates.childNodes[o].childNodes[h].removeAttribute("title"),this._initTooltipPopup()):this.contDates.childNodes[o].childNodes[h].setAttribute("title",this._tipData[f].text),this._tipData[f].showIcon&&(m+=" dhtmlxcalendar_label_title")):this.contDates.childNodes[o].childNodes[h].removeAttribute("title"),this.contDates.childNodes[o].childNodes[h].innerHTML="<div class='"+m+"'>"+u.getDate()+"</div>",this.contDates.childNodes[o].childNodes[h]._date=new Date(f),this.contDates.childNodes[o].childNodes[h]._q=o,this.contDates.childNodes[o].childNodes[h]._w=h,this.contDates.childNodes[o].childNodes[h]._css_month=u.getMonth()==s,this.contDates.childNodes[o].childNodes[h]._css_date=!this._nullDate&&f==a,this.contDates.childNodes[o].childNodes[h]._css_weekend=r>=6,this.contDates.childNodes[o].childNodes[h]._css_dis=this._isOutOfRange(f),this.contDates.childNodes[o].childNodes[h]._css_holiday=1==this._holidays[f],this._updateCellStyle(o,h),f==a&&(this._activeDateCell=this.contDates.childNodes[o].childNodes[h]),++r>7&&(r=1),l++}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(t)}},this._updateCellStyle=function(t,e){var n=this.contDates.childNodes[t].childNodes[e],i="dhtmlxcalendar_cell dhtmlxcalendar_cell";i+=n._css_month?"_month":"",i+=n._css_date?"_date":"",i+=n._css_weekend?"_weekend":"",i+=n._css_holiday?"_holiday":"",i+=n._css_dis?"_dis":"",i+=n._css_hover&&!n._css_dis?"_hover":"",n.className=i,n=null},this._minutesInterval=5,this._initSelector=function(t,e){if(this._selCover||(this._selCover=document.createElement("DIV"),this._selCover.className="dhtmlxcalendar_selector_cover",this.base.firstChild.appendChild(this._selCover)),this._sel||(this._sel=document.createElement("DIV"),this._sel.className="dhtmlxcalendar_selector_obj",this.base.firstChild.appendChild(this._sel),this._sel.appendChild(document.createElement("TABLE")),this._sel.firstChild.className="dhtmlxcalendar_selector_table",this._sel.firstChild.cellSpacing=0,this._sel.firstChild.cellPadding=0,this._sel.firstChild.border=0,this._sel.firstChild.appendChild(document.createElement("TBODY")),this._sel.firstChild.firstChild.appendChild(document.createElement("TR")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left",this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle",this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right",this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"},this._sel.onmouseover=function(t){t=t||event;var e=t.target||t.srcElement;e._cell===!0&&(o._selHover!=e&&o._clearSelHover(),null!=String(e.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)&&(e.className+=" dhtmlxcalendar_selector_cell_hover",o._selHover=e))},this._sel.onmouseout=function(){o._clearSelHover()},this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(t){t=t||event,"touchstart"==t.type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,o._scrollYears(-1)},this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(t){t=t||event,"touchstart"==t.type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,o._scrollYears(1)},1==this.conf.touch&&(this._sel.firstChild.firstChild.firstChild.childNodes[0].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick,this._sel.firstChild.firstChild.firstChild.childNodes[2].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick),this._sel._ta={},this._selHover=null,this._sel.appendChild(document.createElement("DIV")),this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"),1!=this._sel._ta[t]){if("month"==t){this._msCells={},this.msCont=document.createElement("DIV"),this.msCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);for(var n=0,i=0;4>i;i++){var s=document.createElement("UL");s.className="dhtmlxcalendar_selector_line",this.msCont.appendChild(s);for(var a=0;3>a;a++){var l=document.createElement("LI");l.innerHTML=this.langData[this.lang].monthesSNames[n],l.className="dhtmlxcalendar_selector_cell",s.appendChild(l),l._month=n,l._cell=!0,this._msCells[n++]=l}}this.msCont.onclick=function(t){t=t||event,"touchstart"==t.type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0;var e=t.target||t.srcElement;null!=e._month&&(o._hideSelector(),o._updateActiveMonth(),o._drawMonth(new Date(o._activeMonth.getFullYear(),e._month,1,0,0,0,0)),o._doOnSelectorChange())},1==this.conf.touch&&(this.msCont.ontouchstart=this.msCont.onclick)}if("year"==t){this._ysCells={},this.ysCont=document.createElement("DIV"),this.ysCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(var i=0;4>i;i++){var s=document.createElement("UL");s.className="dhtmlxcalendar_selector_line",this.ysCont.appendChild(s);for(var a=0;3>a;a++){var l=document.createElement("LI");l.className="dhtmlxcalendar_selector_cell",l._cell=!0,s.appendChild(l)}}this.ysCont.onclick=function(t){t=t||event,"touchstart"==t.type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0;var e=t.target||t.srcElement;null!=e._year&&(o._hideSelector(),o._drawMonth(new Date(e._year,o._activeMonth.getMonth(),1,0,0,0,0)),o._doOnSelectorChange())},1==this.conf.touch&&(this.ysCont.ontouchstart=this.ysCont.onclick)}if("hours"==t){this._hsCells={},this.hsCont=document.createElement("DIV"),this.hsCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);for(var n=0,i=0;4>i;i++){var s=document.createElement("UL");s.className="dhtmlxcalendar_selector_line",this.hsCont.appendChild(s);for(var a=0;6>a;a++){var l=document.createElement("LI");l.innerHTML=this._fixLength(n,2),l.className="dhtmlxcalendar_selector_cell",s.appendChild(l),l._hours=n,l._cell=!0,this._hsCells[n++]=l}}this.hsCont.onclick=function(t){t=t||event,"touchstart"==t.type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0;var e=t.target||t.srcElement;null!=e._hours&&(o._hideSelector(),o._activeDate.setHours(e._hours),o._updateActiveHours(),o._updateVisibleHours(),o._doOnSelectorChange(),o.callEvent("onTimeChange",[new Date(o._activeDate.getTime())]))},1==this.conf.touch&&(this.hsCont.ontouchstart=this.hsCont.onclick)}if("minutes"==t){var r=4,h=3,d=2;1==this._minutesInterval&&(1==this._selectorMode?(r=2,h=3,d=1):(r=2,h=5,d=1,e+="5")),10==this._minutesInterval&&(r=2),15==this._minutesInterval&&(r=1,h=4,e+="4"),this._rsCells={},this.rsCont=document.createElement("DIV"),this.rsCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);for(var n=0,i=0;r>i;i++){var s=document.createElement("UL");s.className="dhtmlxcalendar_selector_line",this.rsCont.appendChild(s);for(var a=0;h>a;a++){var l=document.createElement("LI");l.innerHTML=d>1?this._fixLength(n,d):n,l.className="dhtmlxcalendar_selector_cell",s.appendChild(l),l._minutes=n,l._cell=!0,this._rsCells[n]=l,n+=this._minutesInterval}}this.rsCont.onclick=function(t){t=t||event,"touchstart"==t.type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0;var e=t.target||t.srcElement;if(null!=e._minutes){if(1==o._minutesInterval){var n=o.getFormatedDate("%i");if(n=1==o._selectorMode?e._minutes.toString()+n.charAt(1):n.charAt(0)+e._minutes.toString(),o._activeDate.setMinutes(Number(n)),o.callEvent("onTimeChange",[new Date(o._activeDate.getTime())]),o._hideSelector(),1==o._selectorMode)return o._updateVisibleMinutes(!0),o._selectorMode=2,o._showSelector("minutes",o._sel._x,o._sel._y,"selector_minutes",!0),void o._updateActiveMinutes();o._selectorMode=1}else o._hideSelector(),o._activeDate.setMinutes(e._minutes),o._updateActiveMinutes(),o.callEvent("onTimeChange",[new Date(o._activeDate.getTime())]);o._updateVisibleMinutes(),o._doOnSelectorChange()}},1==this.conf.touch&&(this.rsCont.ontouchstart=this.rsCont.onclick)}this._sel._ta[t]=!0}},this._showSelector=function(t,e,n,i,s){if(s===!0&&null!=this._sel&&this._isSelectorVisible()&&t==this._sel._t)return void this._hideSelector();"dhx_terrace"==this.conf.skin&&(e+=12),this._sel&&this._sel._ta[t]||this._initSelector(t,i),t!=this._sel._t&&"minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i")),this._sel._x=e,this._sel._y=n,this._sel.style.visibility="hidden",this._sel.style.display="",this._selCover.style.width=this.base.offsetWidth-2+"px",this._selCover.style.top=this.contMonth.offsetHeight+"px",this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px",this._selCover.style.display="",this._sel._t=t,this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+i+("hours"==t&&1==this.conf.today?"2":""),this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display="year"==t?"":"none";var a=Math.max(0,e-Math.round(this._sel.offsetWidth/2));a+this._sel.offsetWidth>this._sel.parentNode.offsetWidth&&(a=this._sel.parentNode.offsetWidth-this._sel.offsetWidth),this._sel.style.left=a+"px","hours"==t||"minutes"==t?this._sel.style.top=n-this._sel.offsetHeight+"px":this._sel.style.top=n+"px",this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px",this._sel.style.visibility="visible",this._doOnSelectorShow(t)},this._doOnSelectorShow=function(t){"month"==t&&this._updateActiveMonth(),"year"==t&&this._updateYearsList(this._activeMonth),"hours"==t&&this._updateActiveHours(),"minutes"==t&&this._updateActiveMinutes()},this._hideSelector=function(t){this._sel&&(this._sel.style.display="none",this._sel.style.visible="hidden",this._selCover.style.display="none","minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i"),this._unloadSelector("minutes")))},this._isSelectorVisible=function(){return this._sel?"none"!=this._sel.style.display:!1},this._doOnSelectorChange=function(t){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),t===!0])},this._clearSelHover=function(){this._selHover&&(this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,"")),this._selHover=null)},this._unloadSelector=function(t){if(this._sel&&this._sel._ta[t]){if("month"==t){this.msCont.onclick=this.msCont.ontouchstart=null,this._msActive=null;for(var e in this._msCells)this._msCells[e]._cell=null,this._msCells[e]._month=null,this._msCells[e].parentNode.removeChild(this._msCells[e]),this._msCells[e]=null;for(this._msCells=null;this.msCont.childNodes.length>0;)this.msCont.removeChild(this.msCont.lastChild);this.msCont.parentNode.removeChild(this.msCont),this.msCont=null}if("year"==t){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(var e in this._ysCells)this._ysCells[e]._cell=null,this._ysCells[e]._year=null,this._ysCells[e].parentNode.removeChild(this._ysCells[e]),this._ysCells[e]=null;for(this._ysCells=null;this.ysCont.childNodes.length>0;)this.ysCont.removeChild(this.ysCont.lastChild);this.ysCont.parentNode.removeChild(this.ysCont),this.ysCont=null}if("hours"==t){this.hsCont.onclick=this.hsCont.ontouchstart=null,this._hsActive=null;for(var e in this._hsCells)this._hsCells[e]._cell=null,this._hsCells[e]._hours=null,this._hsCells[e].parentNode.removeChild(this._hsCells[e]),this._hsCells[e]=null;for(this._hsCells=null;this.hsCont.childNodes.length>0;)this.hsCont.removeChild(this.hsCont.lastChild);this.hsCont.parentNode.removeChild(this.hsCont),this.hsCont=null}if("minutes"==t){this.rsCont.onclick=this.rsCont.ontouchstart=null,this._rsActive=null;for(var e in this._rsCells)this._rsCells[e]._cell=null,this._rsCells[e]._minutes=null,this._rsCells[e].parentNode.removeChild(this._rsCells[e]),this._rsCells[e]=null;for(this._rsCells=null;this.rsCont.childNodes.length>0;)this.rsCont.removeChild(this.rsCont.lastChild);this.rsCont.parentNode.removeChild(this.rsCont),this.rsCont=null}this._sel._ta[t]=null}},this.setMinutesInterval=function(t){1!=t&&5!=t&&10!=t&&15!=t||(this._minutesInterval=t,this._unloadSelector("minutes"))},this._updateActiveMonth=function(){"undefined"!=typeof this._msActive&&"undefined"!=typeof this._msCells[this._msActive]&&(this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell"),this._msActive=this._activeMonth.getMonth(),this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"},this._updateActiveYear=function(){var t=this._activeMonth.getFullYear();this._ysCells[t]&&(this._ysCells[t].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")},this._updateYearsList=function(t){for(var e in this._ysCells)this._ysCells[e]=null,delete this._ysCells[e];for(var n=12*Math.floor(t.getFullYear()/12),i=0;4>i;i++)for(var s=0;3>s;s++)this.ysCont.childNodes[i].childNodes[s].innerHTML=n,this.ysCont.childNodes[i].childNodes[s]._year=n,this.ysCont.childNodes[i].childNodes[s].className="dhtmlxcalendar_selector_cell",this._ysCells[n++]=this.ysCont.childNodes[i].childNodes[s];this._updateActiveYear()},this._scrollYears=function(t){var e=(0>t?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+t,n=new Date(e,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(n)},this._updateActiveHours=function(){"undefined"!=typeof this._hsActive&&"undefined"!=typeof this._hsCells[this._hsActive]&&(this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell"),this._hsActive=this._activeDate.getHours(),this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"},this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)},this._updateActiveMinutes=function(){null!=this._rsActive&&"undefined"!=typeof this._rsActive&&"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell"),1==this._minutesInterval?this._rsActive=this.getFormatedDate("%i").toString().charAt(1==this._selectorMode?0:1):this._rsActive=this._activeDate.getMinutes(),"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")},this._updateVisibleMinutes=function(t){var e=this._fixLength(this._activeDate.getMinutes(),2).toString();1==t&&(e=e.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+e.charAt(1)+"</span>"),this.contTime.firstChild.firstChild.childNodes[3].innerHTML=e,1==t&&(this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=!0)},this._fixLength=function(t,e){for(;String(t).length<e;)t="0"+String(t);return t},this._dateFormat="",this._dateFormatRE=null,this.setDateFormat=function(t){var e={};if(null!=this._strToDate)for(var n in this.i)if(null!=this.i[n].input&&this.i[n].input.value.length>0){var i=this._strToDate(this.i[n].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d");i instanceof Date&&(e[n]=i)}this._dateFormat=t;var s=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(t){var e=t.replace(/%/,"");switch(e){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+o.langData[o.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+o.langData[o.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM";case"u":return"\\d{1,6}";case"P":return"[\\+\\-]\\d{1,2}\\:\\d{1,2}"}return t});this._dateFormatRE=new RegExp(s,"i");for(var n in e)this.i[n].input.value=this._dateToStr(e[n]);e=null},this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this._updateDateStr=function(t){if(this._dateFormatRE&&t.match(this._dateFormatRE)&&t!=this.getFormatedDate()){var e=this._strToDate(t);if(e instanceof Date){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())]))return void(null!=this.i&&null!=this._activeInp&&null!=this.i[this._activeInp]&&null!=this.i[this._activeInp].input&&(this.i[this._activeInp].input.value=this.getFormatedDate()));this._nullDate=!1,this._activeDate=e,this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleMinutes(),this._updateVisibleHours(),this._sel&&this._isSelectorVisible()&&this._doOnSelectorShow(this._sel._t),this._doOnSelectorChange(!0)}}},this.showMonth=function(t){"string"==typeof t&&(t=this._strToDate(t)),t instanceof Date&&this._drawMonth(t)},this.setFormatedDate=function(t,e,n,i){var s=this._strToDate(e,t);return i?s:void this.setDate(s)},this.getFormatedDate=function(t,e){if(!(e&&e instanceof Date)){if(this._nullDate)return"";e=new Date(this._activeDate)}return this._dateToStr(e,t)},this.getWeekNumber=function(t){if("string"==typeof t&&(t=this._strToDate(t)),!(t instanceof Date))return"Invalid Date";"undefined"==typeof this._ftDay&&(this._ftDay=4);var e=this._wStart,n=4,i=new Date(t.getFullYear(),0,1,0,0,0,0),s=i.getDay();0==s&&(s=7),e>n&&(n+=7,s+=7);var a=0;s>=e&&n>=s||(a=1);var l=s-e,o=new Date(t.getFullYear(),0,1-l+7*a,0,0,0,0),r=6048e5,h=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1,0,0,0,0),d=Math.ceil((h.getTime()-o.getTime())/r);if(0==d){var c=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),u=c.getDay()-this._wStart;0>u&&(u+=7),c.setDate(c.getDate()-u),d=this.getWeekNumber(c)}return d},this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"},this.hideWeekNumbers=function(){this.base.firstChild.className=""},this.show=function(t){if(!t&&this._hasParent)return void this._show();if("object"==typeof t&&"undefined"!=typeof t._dhtmlxcalendar_uid&&this.i[t._dhtmlxcalendar_uid]==t)return void this._show(t._dhtmlxcalendar_uid);
if("undefined"==typeof t)for(var e in this.i)t||(t=e);t&&this._show(t)},this.hide=function(){this._isVisible()&&this._hide()},this.isVisible=function(){return this._isVisible()},this._activeInp=null,this.pos="bottom",this.setPosition=function(t,e){this._px=null,this._py=null,"right"==t||"bottom"==t?this.pos=t:(this.pos="int","undefined"==typeof t||isNaN(t)||(this.base.style.left=t+"px",this._px=t),"undefined"==typeof e||isNaN(e)||(this.base.style.top=e+"px",this._py=e),this._ifrSize())},this._show=function(t,e){if(e===!0&&this._activeInp==t&&this._isVisible())return void this._hide();if(this.base.style.visibility="hidden",this.base.style.display="",t){-1==this.base.className.indexOf("dhtmlxcalendar_in_input")&&(this.base.className+=" dhtmlxcalendar_in_input");var n=this.i[t].input||this.i[t].button,i=window.dhx4.screenDim(),s={top:window.dhx4.absTop(n),left:window.dhx4.absLeft(n)};if("right"==this.pos)this.base.style.left=s.left+n.offsetWidth+"px",this.base.style.top=Math.min(s.top,i.bottom-this.base.offsetHeight)+"px";else if("bottom"==this.pos){var a=s.top+n.offsetHeight+1;if(a+this.base.offsetHeight>i.bottom){var l=s.top-this.base.offsetHeight;l>=-20&&(a=l)}var o=s.left;o+this.base.offsetWidth>i.right&&(o=Math.max(0,s.left+n.offsetWidth-this.base.offsetWidth)),this.base.style.left=o+"px",this.base.style.top=a+"px"}else this.base.style.left=(this._px||0)+"px",this.base.style.top=(this._py||0)+"px";this._activeInp=t,n=null}else null!=this._px&&null!=this._py?(this.base.style.left=this._px+"px",this.base.style.top=this._py+"px"):(this.base.style.left="0px",this.base.style.top="0px");this._hideSelector(),this.base.style.visibility="visible",this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi),this._ifrSize(),this._ifr&&(this._ifr.style.display=""),this.callEvent("onShow",[])},this._hide=function(){null!=this._lastHover&&this._clearDayHover(),this._hideSelector(),this.base.style.display="none",window.dhx4.zim.clear(this.conf.zi),this.base.className.indexOf("dhtmlxcalendar_in_input")>=0&&(this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,"")),this._activeInp=null,this._ifr&&(this._ifr.style.display="none"),this.callEvent("onHide",[])},this._isVisible=function(){return"none"!=this.base.style.display},this._rangeActive=!1,this._rangeFrom=null,this._rangeTo=null,this._rangeSet={},this.setInsensitiveDays=function(t){for(var e=this._extractDates(t),n=0;n<e.length;n++)this._rangeSet[new Date(e[n].getFullYear(),e[n].getMonth(),e[n].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)},this.clearInsensitiveDays=function(){this._clearRangeSet(),this._drawMonth(this._activeMonth)},this._holidays={},this.setHolidays=function(t){if(null==t)this._clearHolidays();else if(null!=t)for(var e=this._extractDates(t),n=0;n<e.length;n++)this._holidays[new Date(e[n].getFullYear(),e[n].getMonth(),e[n].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)},this._extractDates=function(t){("string"==typeof t||t instanceof Date)&&(t=[t]);for(var e=[],n=0;n<t.length;n++)if("string"==typeof t[n])for(var i=t[n].split(","),s=0;s<i.length;s++)e.push(this._strToDate(i[s]));else t[n]instanceof Date&&e.push(t[n]);return e},this._clearRange=function(){this._rangeActive=!1,this._rangeType=null,this._rangeFrom=null,this._rangeTo=null},this._clearRangeSet=function(){for(var t in this._rangeSet)this._rangeSet[t]=null,delete this._rangeSet[t]},this._clearHolidays=function(){for(var t in this._holidays)this._holidays[t]=null,delete this._holidays[t]},this._isOutOfRange=function(t){if(1==this._rangeSet[t])return!0;if(this._rangeActive){if("in"==this._rangeType&&(t<this._rangeFrom||t>this._rangeTo))return!0;if("out"==this._rangeType&&t>=this._rangeFrom&&t<=this._rangeTo)return!0;if("from"==this._rangeType&&t<this._rangeFrom)return!0;if("to"==this._rangeType&&t>this._rangeTo)return!0}var e=new Date(t);return this._rangeWeek&&this._rangeWeekData[e.getDay()]===!0?!0:this._rangeMonth&&this._rangeMonthData[e.getDate()]===!0?!0:!(!this._rangeYear||this._rangeYearData[e.getMonth()+"_"+e.getDate()]!==!0)},this.clearSensitiveRange=function(){this._clearRange(),this._drawMonth(this._activeMonth)},this.setSensitiveRange=function(t,e,n){var i=!1;if(null!=t&&null!=e){if(t instanceof Date||(t=this._strToDate(t)),e instanceof Date||(e=this._strToDate(e)),t.getTime()>e.getTime())return;this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="in",i=!0}i||null==t||null!=e||(t instanceof Date||(t=this._strToDate(t)),this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),this._rangeTo=null,n===!0&&this._rangeFrom++,this._rangeActive=!0,this._rangeType="from",i=!0),i||null!=t||null==e||(e instanceof Date||(e=this._strToDate(e)),this._rangeFrom=null,this._rangeTo=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime(),n===!0&&this._rangeTo--,this._rangeActive=!0,this._rangeType="to",i=!0),i&&this._drawMonth(this._activeMonth)},this.setInsensitiveRange=function(t,e){if(null!=t&&null!=e){if(t instanceof Date||(t=this._strToDate(t)),e instanceof Date||(e=this._strToDate(e)),t.getTime()>e.getTime())return;return this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="out",void this._drawMonth(this._activeMonth)}return null!=t&&null==e?void this.setSensitiveRange(null,t,!0):null==t&&null!=e?void this.setSensitiveRange(e,null,!0):void 0},this.disableDays=function(t,e){if("week"==t){"object"!=typeof e&&"undefined"==typeof e.length&&(e=[e]),this._rangeWeekData||(this._rangeWeekData={});for(var n in this._rangeWeekData)this._rangeWeekData[n]=!1,delete this._rangeWeekData[n];for(var i=0;i<e.length;i++)this._rangeWeekData[e[i]]=!0,7==e[i]&&(this._rangeWeekData[0]=!0);this._rangeWeek=!0}if("month"==t){"object"!=typeof e&&"undefined"==typeof e.length&&(e=[e]),this._rangeMonthData||(this._rangeMonthData={});for(var n in this._rangeMonthData)this._rangeMonthData[n]=!1,delete this._rangeMonthData[n];for(var i=0;i<e.length;i++)this._rangeMonthData[e[i]]=!0;this._rangeMonth=!0}if("year"==t){var s=this._extractDates(e);this._rangeYearData||(this._rangeYearData={});for(var n in this._rangeYearData)this._rangeYearData[n]=!1,delete this._rangeYearData[n];for(var i=0;i<s.length;i++)this._rangeYearData[s[i].getMonth()+"_"+s[i].getDate()]=!0;this._rangeYear=!0}this._drawMonth(this._activeMonth)},this.enableDays=function(t){"week"==t&&(this._rangeWeek=!1),"month"==t&&(this._rangeMonth=!1),"year"==t&&(this._rangeYear=!1),this._drawMonth(this._activeMonth)},this._tipData={},this._tipTM=null,this._tipTMTime=400,this._tipEvs=!1,this._tipPopup=null,this._tipCellDate=null,this._tipCellDim=null,this.setTooltip=function(t,e,n,i){for(var s=this._extractDates(t),a=0;a<s.length;a++){var l=new Date(s[a].getFullYear(),s[a].getMonth(),s[a].getDate(),0,0,0,0).getTime();this._tipData[l]={text:e,showIcon:n,usePopup:i}}this._drawMonth(this._activeMonth)},this.clearTooltip=function(t){for(var e=this._extractDates(t),n=0;n<e.length;n++){var i=new Date(e[n].getFullYear(),e[n].getMonth(),e[n].getDate(),0,0,0,0).getTime();this._tipData[i]=null,delete this._tipData[i]}this._drawMonth(this._activeMonth)},this._initTooltipPopup=function(){this._tipEvs||(this.attachEvent("onMouseOver",function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime();null!=this._tipData[e]&&(this._tipTM&&window.clearTimeout(this._tipTM),this._tipCellDate=t,this._tipCellDim=this.getCellDimension(t),this._tipText=this._tipData[e].text,this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime))}),this.attachEvent("onMouseOut",this._hideTooltipPopup),this._tipEvs=!0)},this._showTooltipPopup=function(t,e,n,i,s){o._tipPopup||(o._tipPopup=new dhtmlXPopup({mode:"top"})),o._tipPopup.attachHTML(o._tipText),o._tipPopup.show(o._tipCellDim.x,o._tipCellDim.y,o._tipCellDim.w,o._tipCellDim.h),o.callEvent("onPopupShow",[o._tipCellDate])},this._hideTooltipPopup=function(){this._tipTM&&window.clearTimeout(this._tipTM),null!=this._tipPopup&&this._tipPopup.isVisible()&&(this._tipPopup.hide(),this.callEvent("onPopupHide",[this._tipCellDate]))},this.getPopup=function(){return this._tipPopup},this.getCellDimension=function(t){if("string"==typeof t&&(t=this._strToDate(t)),!(t instanceof Date))return null;for(var e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),n=null,i=0;i<this.contDates.childNodes.length;i++)for(var s=0;s<this.contDates.childNodes[i].childNodes.length;s++){var a=this.contDates.childNodes[i].childNodes[s];null!=a._date&&a._date.getTime()==e&&(n={x:window.dhx4.absLeft(a),y:window.dhx4.absTop(a),w:a.offsetWidth,h:a.offsetHeight}),a=null}return n},this._updateFromInput=function(t){if(this._nullInInput&&0==t.value.replace(/\s/g,"").length){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[null]))return void(null!=this.i&&null!=this._activeInp&&null!=this.i[this._activeInp]&&null!=this.i[this._activeInp].input&&(this.i[this._activeInp].input.value=this.getFormatedDate()));this.setDate(null)}else this._updateDateStr(t.value);t=null},this._doOnClick=function(t){t=t||event;var e=t.target||t.srcElement;return e._dhtmlxcalendar_uid&&e._dhtmlxcalendar_uid!=o._activeInp&&o._isVisible()&&o._activeInp?void o._hide():void(e._dhtmlxcalendar_uid&&o.i[e._dhtmlxcalendar_uid]||(o._isSelectorVisible()?o._hideSelector():!o._hasParent&&o._isVisible()&&o._hide()))},this._doOnKeyDown=function(t){t=t||event,27!=t.keyCode&&13!=t.keyCode||(o._isSelectorVisible()?o._hideSelector():o._isVisible()&&!o._hasParent&&o._hide())},this._doOnInpClick=function(t){t=t||event,"touchstart"==t.type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;e._dhtmlxcalendar_uid&&(o._listenerEnabled||o._updateFromInput(e),o._show(e._dhtmlxcalendar_uid,!0))},this._doOnInpKeyUp=function(t){t=t||event;var e=t.target||t.srcElement;13!=t.keyCode&&e._dhtmlxcalendar_uid&&(o._listenerEnabled||o._updateFromInput(e))},this._doOnBtnClick=function(t){t=t||event,"touchstart"==t.type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;e._dhtmlxcalendar_uid&&(null!=o.i[e._dhtmlxcalendar_uid].input&&o._updateFromInput(o.i[e._dhtmlxcalendar_uid].input),o._show(e._dhtmlxcalendar_uid,!0))},this._doOnUnload=function(){o&&o.unload&&o.unload()},"function"==typeof window.addEventListener?(document.body.addEventListener("click",o._doOnClick,!1),window.addEventListener("keydown",o._doOnKeyDown,!1),window.addEventListener("unload",o._doOnUnload,!1),1==this.conf.touch&&document.body.addEventListener("touchstart",o._doOnClick,!1)):(document.body.attachEvent("onclick",o._doOnClick),document.body.attachEvent("onkeydown",o._doOnKeyDown),window.attachEvent("onunload",o._doOnUnload)),this.attachObj=function(t){var e=window.dhx4.newId();return"string"==typeof t?this.i[e]={input:document.getElementById(t)}:"undefined"!=typeof t.tagName?this.i[e]={input:t}:"object"!=typeof t||null==t.input&&null==t.button||(this.i[e]={},null!=t.input&&(this.i[e].input="string"==typeof t.input?document.getElementById(t.input):t.input),null!=t.button&&(this.i[e].button="string"==typeof t.button?document.getElementById(t.button):t.button)),this._attachEventsToObject(e),e},this.detachObj=function(t){var e=null;if(null!=this.i[t]?e=t:"string"==typeof t?(t=document.getElementById(t),e=t._dhtmlxcalendar_uid):"undefined"!=typeof t.tagName?e=t._dhtmlxcalendar_uid:"object"!=typeof t||null==t.input&&null==t.button||(null==e&&null!=t.input&&(e=("string"==typeof t.input?document.getElementById(t.input):t.input)._dhtmlxcalendar_uid),null==e&&null!=t.button&&(e=("string"==typeof t.button?document.getElementById(t.button):t.button)._dhtmlxcalendar_uid)),null!=e&&null!=this.i[e]){this._detachEventsFromObject(e);for(var n in this.i[n])this.i[e][n]._dhtmlxcalendar_uid=null,this.i[e][n]=null,delete this.i[e][n];return this.i[e]=null,delete this.i[e],!0}return!1},this._attachEventsToObject=function(t){null!=this.i[t].button?(this.i[t].button._dhtmlxcalendar_uid=t,"function"==typeof window.addEventListener?(this.i[t].button.addEventListener("click",o._doOnBtnClick,!1),1==this.conf.touch&&this.i[t].button.addEventListener("touchstart",o._doOnBtnClick,!1)):this.i[t].button.attachEvent("onclick",o._doOnBtnClick)):null!=this.i[t].input&&(this.i[t].input._dhtmlxcalendar_uid=t,"function"==typeof window.addEventListener?(this.i[t].input.addEventListener("click",o._doOnInpClick,!1),this.i[t].input.addEventListener("keyup",o._doOnInpKeyUp,!1),1==this.conf.touch&&this.i[t].input.addEventListener("touchstart",o._doOnInpClick,!1)):(this.i[t].input.attachEvent("onclick",o._doOnInpClick),this.i[t].input.attachEvent("onkeyup",o._doOnInpKeyUp)))},this._detachEventsFromObject=function(t){null!=this.i[t].button?"function"==typeof window.addEventListener?(this.i[t].button.removeEventListener("click",o._doOnBtnClick,!1),1==this.conf.touch&&this.i[t].button.removeEventListener("touchstart",o._doOnBtnClick,!1)):this.i[t].button.detachEvent("onclick",o._doOnBtnClick):null!=this.i[t].input&&("function"==typeof window.addEventListener?(this.i[t].input.removeEventListener("click",o._doOnInpClick,!1),this.i[t].input.removeEventListener("keyup",o._doOnInpKeyUp,!1),1==this.conf.touch&&this.i[t].input.removeEventListener("touchstart",o._doOnInpClick,!1)):(this.i[t].input.detachEvent("onclick",o._doOnInpClick),this.i[t].input.detachEvent("onkeyup",o._doOnInpKeyUp)))},this.enableListener=function(t){t&&("function"==typeof window.addEventListener?(t.addEventListener("focus",o._listenerEvFocus,!1),t.addEventListener("blur",o._listenerEvBlur,!1)):(t.attachEvent("onfocus",o._listenerEvFocus),t.attachEvent("onblur",o._listenerEvBlur)),t=null)},this.disableListener=function(t){t&&(t._f0=!1,this._tmListener&&window.clearTimeout(this._tmListener),"function"==typeof window.addEventListener?(t.removeEventListener("focus",o._listenerEvFocus,!1),t.removeEventListener("blur",o._listenerEvBlur,!1)):(t.detachEvent("onfocus",o._listenerEvFocus),t.detachEvent("onblur",o._listenerEvBlur)),t=null)},this._startListener=function(t){this._tmListener&&window.clearTimeout(this._tmListener),"undefined"==typeof t._v1&&(t._v1=t.value),t._v1!=t.value&&(this._updateFromInput(t),t._v1=t.value),t._f0&&(this._tmListener=window.setTimeout(function(){o._startListener(t)},100))},this._listenerEvFocus=function(t){t=t||event;var e=t.target||t.srcElement;e._f0=!0,o._startListener(e),e=null},this._listenerEvBlur=function(t){t=t||event;var e=t.target||t.srcElement;e._f0=!1,e=null};for(var h in this.i)this._attachEventsToObject(h);return window.dhx4._eventable(this),this._evOnArrowClick=function(t){return this.callEvent("onArrowClick",t)},this._evOnClick=function(t){return this.callEvent("onClick",t)},this._evOnMouseOut=function(t){return this.callEvent("onMouseOut",t)},this._evOnMouseOver=function(t){return this.callEvent("onMouseOver",t)},this.unload=function(){this._activeDate=null,this._activeDateCell=null,this._activeInp=null,this._activeMonth=null,this._dateFormat=null,this._dateFormatRE=null,this._lastHover=null,this._tmListener&&window.clearTimeout(this._tmListener),this._tmListener=null,"function"==typeof window.addEventListener?(document.body.removeEventListener("click",o._doOnClick,!1),window.removeEventListener("keydown",o._doOnKeyDown,!1),window.removeEventListener("unload",o._doOnUnload,!1),1==this.conf.touch&&document.body.removeEventListener("touchstart",o._doOnClick,!1)):(document.body.detachEvent("onclick",o._doOnClick),document.body.detachEvent("onkeydown",o._doOnKeyDown),window.detachEvent("onunload",o._doOnKeyDown)),this._doOnClick=null,this._doOnKeyDown=null,this._doOnUnload=null;for(var t in this.i)this.i[t]._dhtmlxcalendar_uid=null,this._detachEventsFromObject(t),this.disableListener(this.i[t].input),this.i[t]=null,delete this.i[t];for(this.i=null,this._doOnInpClick=null,this._doOnInpKeyUp=null,window.dhx4._eventable(this,"clear"),this.contMonth.onselectstart=null,this.contMonth.firstChild.firstChild.onclick=null,this.contMonth.firstChild.firstChild.ontouchstart=null,this.contMonth.firstChild.firstChild.firstChild.onmouseover=null,this.contMonth.firstChild.firstChild.firstChild.onmouseout=null,this.contMonth.firstChild.firstChild.lastChild.onmouseover=null,this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;this.contMonth.firstChild.firstChild.childNodes.length>0;)this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild);for(this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild),this.contMonth.removeChild(this.contMonth.firstChild),this.contMonth.parentNode.removeChild(this.contMonth),this.contMonth=null;this.contDays.firstChild.childNodes.length>0;)this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild);for(this.contDays.removeChild(this.contDays.firstChild),this.contDays.parentNode.removeChild(this.contDays),this.contDays=null,this.contDates.onclick=null,this.contDates.ontouchstart=null,this.contDates.onmouseover=null,this.contDates.onmouseout=null;this.contDates.childNodes.length>0;){for(;this.contDates.lastChild.childNodes.length>0;)this.contDates.lastChild.lastChild._css_date=null,this.contDates.lastChild.lastChild._css_month=null,this.contDates.lastChild.lastChild._css_weekend=null,this.contDates.lastChild.lastChild._css_hover=null,this.contDates.lastChild.lastChild._date=null,this.contDates.lastChild.lastChild._q=null,this.contDates.lastChild.lastChild._w=null,this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild);this.contDates.removeChild(this.contDates.lastChild)}for(this.contDates.parentNode.removeChild(this.contDates),this.contDates=null,this.contTime.firstChild.firstChild.onclick=null,this.contTime.firstChild.firstChild.ontouchstart=null;this.contTime.firstChild.firstChild.childNodes.length>0;)this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild);if(this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild),this.contTime.removeChild(this.contTime.firstChild),this.contTime.parentNode.removeChild(this.contTime),this.contTime=null,this._lastHover=null,this._unloadSelector("month"),this._unloadSelector("year"),this._unloadSelector("hours"),this._unloadSelector("minutes"),this._selCover&&(this._selCover.parentNode.removeChild(this._selCover),this._selCover=null),this._sel){for(var t in this._sel._ta)this._sel._ta[t]=null;for(this._sel._ta=null,this._sel._t=null,this._sel.onmouseover=null,this._sel.onmouseout=null;this._sel.firstChild.firstChild.firstChild.childNodes.length>0;)this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null,this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild);for(this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild),this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);this._sel.childNodes.length>0;)this._sel.removeChild(this._sel.lastChild);this._sel.parentNode.removeChild(this._sel),this._sel=null}this.base.onclick=null,this.base.onmousedown=null,this.base.ontouchstart=null,this.base.onmouseout=null,this.base.parentNode.removeChild(this.base),this.base=null,this._clearDayHover=null,this._clearSelHover=null,this._doOnSelectorChange=null,this._doOnSelectorShow=null,this._drawMonth=null,this._fixLength=null,this._ifrSize=null,this._hide=null,this._hideSelector=null,this._initSelector=null,this._isSelectorVisible=null,this._isVisible=null,this._scrollYears=null,this._show=null,this._showSelector=null,this._strToDate=null,this._updateActiveHours=null,this._updateActiveMinutes=null,this._updateActiveMonth=null,this._updateActiveYear=null,this._updateCellStyle=null,this._updateDateStr=null,this._updateVisibleHours=null,this._updateVisibleMinutes=null,this._updateYearsList=null,this.enableIframe=null,this.hide=null,this.hideTime=null,this.setDate=null,this.setDateFormat=null,this.setYearsRange=null,this.show=null,this.showTime=null,this.unload=null,null!=this._tipPopup&&(this._tipPopup.unload(),this._tipPopup=null);for(var t in this)delete this[t];t=o=null},this.setDate(this._activeDate),this}"undefined"==typeof window.dhx4&&(window.dhx4={version:"4.6",skin:null,skinDetect:function(t){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[this.readFromCss(t+"_skin_detect")]||null},readFromCss:function(t,e){var n=document.createElement("DIV");n.className=t,null!=document.body.firstChild?document.body.insertBefore(n,document.body.firstChild):document.body.appendChild(n);var i=n[e||"offsetWidth"];return n.parentNode.removeChild(n),n=null,i},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var t=this.first();for(var e in this.data)t=Math.max(t,this.data[e]);return t},reserve:function(t){return this.data[t]=this.last()+this.step,this.data[t]},clear:function(t){null!=this.data[t]&&(this.data[t]=null,delete this.data[t])}},s2b:function(t){return"string"==typeof t&&(t=t.toLowerCase()),1==t||1==t||"true"==t||"1"==t||"yes"==t||"y"==t||"on"==t},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}return obj=dhx4.temp,dhx4.temp=null,obj},absLeft:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).left},absTop:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).top},_aOfs:function(t){for(var e=0,n=0;t;)e+=parseInt(t.offsetTop),n+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:n}},_aOfsRect:function(t){var e=t.getBoundingClientRect(),n=document.body,i=document.documentElement,s=window.pageYOffset||i.scrollTop||n.scrollTop,a=window.pageXOffset||i.scrollLeft||n.scrollLeft,l=i.clientTop||n.clientTop||0,o=i.clientLeft||n.clientLeft||0,r=e.top+s-l,h=e.left+a-o;return{top:Math.round(r),left:Math.round(h)}},getOffset:function(t){return t.getBoundingClientRect?this._aOfsRect(t):this._aOfs(t)},_isObj:function(t){return null!=t&&"object"==typeof t&&"undefined"==typeof t.length},_copyObj:function(t){if(this._isObj(t)){var e={};for(var n in t)"object"==typeof t[n]&&null!=t[n]?e[n]=this._copyObj(t[n]):e[n]=t[n]}else for(var e=[],n=0;n<t.length;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=this._copyObj(t[n]):e[n]=t[n];return e},screenDim:function(){var t=navigator.userAgent.indexOf("MSIE")>=0,e={};return e.left=document.body.scrollLeft,e.right=e.left+(window.innerWidth||document.body.clientWidth),e.top=Math.max((t?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),e.bottom=e.top+(t?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight),e},selectTextRange:function(t,e,n){t="string"==typeof t?document.getElementById(t):t;var i=t.value.length;if(e=Math.max(Math.min(e,i),0),n=Math.min(n,i),t.setSelectionRange)try{t.setSelectionRange(e,n)}catch(s){}else if(t.createTextRange){var a=t.createTextRange();a.moveStart("character",e),a.moveEnd("character",n-i);try{a.select()}catch(s){}}},transData:null,transDetect:function(){if(null==this.transData){this.transData={transProp:!1,transEv:null};var t={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var e in t)0==this.transData.transProp&&null!=document.documentElement.style[e]&&(this.transData.transProp=e,this.transData.transEv=t[e]);t=null}return this.transData},_xmlNodeValue:function(t){for(var e="",n=0;n<t.childNodes.length;n++)e+=null!=t.childNodes[n].nodeValue?t.childNodes[n].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"";return e}},window.dhx4.isIE=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE6=null==window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,window.dhx4.isIE7=navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,window.dhx4.isIE8=navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE9=navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE10=navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&1!=window.navigator.pointerEnabled,window.dhx4.isIE11=navigator.userAgent.indexOf("Trident")>=0&&1==window.navigator.pointerEnabled,window.dhx4.isEdge=navigator.userAgent.indexOf("Edge")>=0,window.dhx4.isOpera=navigator.userAgent.indexOf("Opera")>=0,window.dhx4.isChrome=navigator.userAgent.indexOf("Chrome")>=0&&!window.dhx4.isEdge,window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge,window.dhx4.isFF=navigator.userAgent.indexOf("Firefox")>=0,window.dhx4.isIPad=navigator.userAgent.search(/iPad/gi)>=0,window.dhx4.dnd={evs:{},p_en:(window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled),_mTouch:function(t){return window.dhx4.isIE10&&t.pointerType==t.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&"mouse"==t.pointerType||window.dhx4.isEdge&&"mouse"==t.pointerType},_touchOn:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="",t=null},_touchOff:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="none",t=null}},1==window.navigator.pointerEnabled?window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}:1==window.navigator.msPointerEnabled?window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:"undefined"!=typeof window.addEventListener&&(window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"})),"undefined"==typeof window.dhx4.template&&(window.dhx4.trim=function(t){return String(t).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},window.dhx4.template=function(t,e,n){return t.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var t=arguments[1],i=window.dhx4.trim(arguments[3]),s=null,a=[e[t]];if(i.length>0){i=i.split(":");for(var l=[],o=0;o<i.length;o++)o>0&&null!=l[l.length-1].match(/\\$/)?l[l.length-1]=l[l.length-1].replace(/\\$/,"")+":"+i[o]:l.push(i[o]);s=l[0];for(var o=1;o<l.length;o++)a.push(l[o])}return"string"==typeof s&&"function"==typeof window.dhx4.template[s]?window.dhx4.template[s].apply(window.dhx4.template,a):t.length>0&&"undefined"!=typeof e[t]?1==n?window.dhx4.trim(e[t]):String(e[t]):""})},window.dhx4.template.date=function(t,e){return null!=t?t instanceof Date?window.dhx4.date2str(t,e):(t=t.toString(),null!=t.match(/^\d*$/)?window.dhx4.date2str(new Date(parseInt(t)),e):t):""},window.dhx4.template.maxlength=function(t,e){return String(t).substr(0,e)},window.dhx4.template.number_format=function(t,e,n,i){var s=window.dhx4.template._parseFmt(e,n,i);return 0==s?t:window.dhx4.template._getFmtValue(t,s)},window.dhx4.template.lowercase=function(t){return"undefined"!=typeof t&&null!=t||(t=""),String(t).toLowerCase()},window.dhx4.template.uppercase=function(t){return"undefined"!=typeof t&&null!=t||(t=""),String(t).toUpperCase()},window.dhx4.template._parseFmt=function(t,e,n){var i=t.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(null==i||4!=i.length)return!1;var s={i_len:!1,i_sep:"string"==typeof e?e:",",d_len:!1,d_sep:"string"==typeof n?n:".",s_bef:"string"==typeof i[1]?i[1]:"",s_aft:"string"==typeof i[3]?i[3]:""},a=i[2].split(".");null!=a[1]&&(s.d_len=a[1].length);var l=a[0].split(",");return l.length>1&&(s.i_len=l[l.length-1].length),s},window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(null!=r&&5==r.length){var v0="";if(null!=r[1]&&(v0+=r[1]),v0+=fmt.s_bef,fmt.i_len!==!1){for(var i=0,v1="",q=r[2].length-1;q>=0;q--)v1=""+r[2].charAt(q)+v1,++i==fmt.i_len&&q>0&&(v1=fmt.i_sep+v1,i=0);v0+=v1}else v0+=r[2];if(fmt.d_len!==!1){for(null==r[4]&&(r[4]="");r[4].length<fmt.d_len;)r[4]+="0";eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=r[4].match(dhx4.temp);null!=t1&&(v0+=fmt.d_sep+t1),dhx4.temp=t1=null}return v0+=fmt.s_aft}return value}),"undefined"==typeof window.dhx4.dateLang&&(window.dhx4.dateLang="en",window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}},window.dhx4.dateFormat={en:"%Y-%m-%d"},window.dhx4.date2str=function(t,e,n){if(null!=e&&"undefined"!=typeof e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=n&&"undefined"!=typeof n||(n=window.dhx4.dateStrings[window.dhx4.dateLang]),t instanceof Date)var i=function(t){return 1==String(t).length?"0"+String(t):t},s=function(e){switch(e){case"%d":return i(t.getDate());case"%j":return t.getDate();case"%D":return n.dayShortName[t.getDay()];case"%l":return n.dayFullName[t.getDay()];case"%m":return i(t.getMonth()+1);case"%n":return t.getMonth()+1;case"%M":return n.monthShortName[t.getMonth()];case"%F":return n.monthFullName[t.getMonth()];case"%y":return i(t.getYear()%100);case"%Y":return t.getFullYear();case"%g":return(t.getHours()+11)%12+1;case"%h":return i((t.getHours()+11)%12+1);case"%G":return t.getHours();case"%H":return i(t.getHours());case"%i":return i(t.getMinutes());case"%s":return i(t.getSeconds());case"%a":return t.getHours()>11?"pm":"am";case"%A":return t.getHours()>11?"PM":"AM";case"%%":return"%";case"%u":return t.getMilliseconds();case"%P":if(null!=window.dhx4.temp_calendar&&null!=window.dhx4.temp_calendar.tz)return window.dhx4.temp_calendar.tz;var s=t.getTimezoneOffset(),a=Math.abs(Math.floor(s/60)),l=Math.abs(s)-60*a;return(s>0?"-":"+")+i(a)+":"+i(l);default:return e}},a=String(e||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,s);return a||String(t)},window.dhx4.str2date=function(t,e,n){null!=e&&"undefined"!=typeof e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=n&&"undefined"!=typeof n||(n=window.dhx4.dateStrings[window.dhx4.dateLang]),e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var i=[],s=[];e=e.replace(/%[a-z]/gi,function(t){switch(t){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":return s.push(t),"(\\d{2})";case"%D":case"%l":case"%M":case"%F":return s.push(t),"([a-z-]{1,})";case"%j":case"%n":case"%g":case"%G":return s.push(t),"(\\d{1,2})";case"%Y":return s.push(t),"(\\d{4})";case"%a":return s.push(t),"([a|p]m)";case"%A":return s.push(t),"([A|P]M)";case"%u":return s.push(t),"(\\d{1,6})";case"%P":return s.push(t),"([+-]\\d{1,2}:\\d{1,2})"}return t});var a=new RegExp(e,"i"),l=t.match(a);if(null==l||l.length-1!=s.length)return"Invalid Date";for(var o=1;o<l.length;o++)i.push(l[o]);for(var r={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7},h={},d={},o=0;o<s.length;o++)if("undefined"!=typeof r[s[o]]){var c=r[s[o]];h[c]||(h[c]=[],d[c]=[]),h[c].push(i[o]),d[c].push(s[o])}i=[],s=[];for(var o=1;7>=o;o++)if(null!=h[o])for(var u=0;u<h[o].length;u++)i.push(h[o][u]),s.push(d[o][u]);var _=new Date;_.setDate(1),_.setHours(0),_.setMinutes(0),_.setSeconds(0),_.setMilliseconds(0);for(var f=function(t,e){for(var n=0;n<e.length;n++)if(e[n].toLowerCase()==t)return n;return-1},o=0;o<i.length;o++)switch(s[o]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":isNaN(i[o])||_[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear",
"%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[s[o]]](Number(i[o])+("%m"==s[o]||"%n"==s[o]?-1:0));break;case"%M":case"%F":var m=f(i[o].toLowerCase(),n[{"%M":"monthShortName","%F":"monthFullName"}[s[o]]]);m>=0&&_.setMonth(m);break;case"%y":if(!isNaN(i[o])){var g=Number(i[o]);_.setFullYear(g+(g>50?1900:2e3))}break;case"%g":case"%h":if(!isNaN(i[o])){var g=Number(i[o]);12>=g&&g>=0&&_.setHours(g+(f("pm",i)>=0?12==g?0:12:12==g?-12:0))}break;case"%P":null!=window.dhx4.temp_calendar&&(window.dhx4.temp_calendar.tz=i[o])}return _}),"undefined"==typeof window.dhx4.ajax&&(window.dhx4.ajax={cache:!1,method:"get",parse:function(t){if("string"!=typeof t)return t;if(t=t.replace(/^[\s]+/,""),window.DOMParser&&!dhx4.isIE)var e=(new window.DOMParser).parseFromString(t,"text/xml");else if(window.ActiveXObject!==window.undefined){var e=new window.ActiveXObject("Microsoft.XMLDOM");e.async="false",e.loadXML(t)}return e},xmltop:function(t,e,n){if(("undefined"==typeof e.status||e.status<400)&&(xml=e.responseXML?e.responseXML||e:dhx4.ajax.parse(e.responseText||e),xml&&null!==xml.documentElement))try{if(!xml.getElementsByTagName("parsererror").length)return xml.getElementsByTagName(t)[0]}catch(i){}return-1!==n&&dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],n]),document.createElement("DIV")},xpath:function(t,e){if(e.nodeName||(e=e.responseXML||e),!dhx4.isIE){for(var n,i=[],s=(e.ownerDocument||e).evaluate(t,e,null,XPathResult.ANY_TYPE,null);n=s.iterateNext();)i.push(n);return i}try{return e.selectNodes(t)||[]}catch(a){return[]}},query:function(t){dhx4.ajax._call(t.method||"GET",t.url,t.data||"",t.async||!0,t.callback,null,t.headers)},get:function(t,e){return this._call("GET",t,null,!0,e)},getSync:function(t){return this._call("GET",t,null,!1)},put:function(t,e,n){return this._call("PUT",t,e,!0,n)},del:function(t,e,n){return this._call("DELETE",t,e,!0,n)},post:function(t,e,n){return 1==arguments.length?e="":2!=arguments.length||"function"!=typeof e&&"function"!=typeof window[e]?e=String(e):(n=e,e=""),this._call("POST",t,e,!0,n)},postSync:function(t,e){return e=null==e?"":String(e),this._call("POST",t,e,!1)},getLong:function(t,e){this._call("GET",t,null,!0,e,{url:t})},postLong:function(t,e,n){2==arguments.length&&(n=e,e=""),this._call("POST",t,e,!0,n,{url:t,postData:e})},_call:function(t,e,n,i,s,a,l){var o=window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r=null!=navigator.userAgent.match(/AppleWebKit/)&&null!=navigator.userAgent.match(/Qt/)&&null!=navigator.userAgent.match(/Safari/);if(1==i&&(o.onreadystatechange=function(){if(4==o.readyState||1==r&&3==o.readyState){if((200!=o.status||""==o.responseText)&&!dhx4.callEvent("onAjaxError",[{xmlDoc:o,filePath:e,async:i}]))return;window.setTimeout(function(){"function"==typeof s&&s.apply(window,[{xmlDoc:o,filePath:e,async:i}]),null!=a&&("undefined"!=typeof a.postData?dhx4.ajax.postLong(a.url,a.postData,s):dhx4.ajax.getLong(a.url,s)),s=null,o=null},1)}}),"GET"==t&&(e+=this._dhxr(e)),o.open(t,e,i),null!=l)for(var h in l)o.setRequestHeader(h,l[h]);else"POST"==t||"PUT"==t||"DELETE"==t?o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==t&&(n=null);return o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(n),1!=i&&(4==o.readyState||1==r&&3==o.readyState)&&(200==o.status&&""!=o.responseText||dhx4.callEvent("onAjaxError",[{xmlDoc:o,filePath:e,async:i}])),{xmlDoc:o,filePath:e,async:i}},_dhxr:function(t,e){return 1!=this.cache?(null==t.match(/^[\?\&]$/)&&(t=t.indexOf("?")>=0?"&":"?"),"undefined"==typeof e&&(e=!0),t+"dhxr"+(new Date).getTime()+(1==e?"=1":"")):""}}),"undefined"==typeof window.dhx4._enableDataLoading&&(window.dhx4._enableDataLoading=function(t,e,n,i,s){if("clear"==s){for(var a in t._dhxdataload)t._dhxdataload[a]=null,delete t._dhxdataload[a];return t._loadData=null,t._dhxdataload=null,t.load=null,t.loadStruct=null,void(t=null)}if(t._dhxdataload={initObj:e,xmlToJson:n,xmlRootTag:i,onBeforeXLS:null},t._loadData=function(t,e,n){2==arguments.length&&(n=e,e=null);var i=null;if(3==arguments.length&&(n=arguments[2]),"string"==typeof t){var s=t.replace(/^\s{1,}/,"").replace(/\s{1,}$/,""),a=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(a.test(s.replace(/^<\?xml[^\?]*\?>\s*/,""))&&(i=dhx4.ajax.parse(t),null!=i&&(i=this[this._dhxdataload.xmlToJson].apply(this,[i]))),null!=i||null==s.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)&&null==s.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)||(i=dhx4.s2j(s)),null==i){this.callEvent("onXLS",[]);var l=[];if("function"==typeof this._dhxdataload.onBeforeXLS){var s=this._dhxdataload.onBeforeXLS.apply(this,[t]);if(null!=s&&"object"==typeof s&&(null!=s.url&&(t=s.url),null!=s.params))for(var o in s.params)l.push(o+"="+encodeURIComponent(s.params[o]))}var r=this,h=function(e){var i=null;i=(e.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||null!=e.xmlDoc.responseText.replace(/^\s{1,}/,"").match(/^</)?r[r._dhxdataload.xmlToJson].apply(r,[e.xmlDoc.responseXML]):dhx4.s2j(e.xmlDoc.responseText),null!=i&&r[r._dhxdataload.initObj].apply(r,[i,t]),r.callEvent("onXLE",[]),null!=n&&("function"==typeof n?n.apply(r,[]):"function"==typeof window[n]&&window[n].apply(r,[])),h=n=null,i=e=r=null};return l=l.join("&")+("string"==typeof e?"&"+e:""),void("post"==dhx4.ajax.method?dhx4.ajax.post(t,l,h):"get"==dhx4.ajax.method&&dhx4.ajax.get(t+(l.length>0?(t.indexOf("?")>0?"&":"?")+l:""),h))}}else i="object"==typeof t.documentElement||"undefined"!=typeof t.tagName&&"undefined"!=typeof t.getElementsByTagName&&t.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0?this[this._dhxdataload.xmlToJson].apply(this,[t]):window.dhx4._copyObj(t);null!=i&&this[this._dhxdataload.initObj].apply(this,[i]),null!=n&&("function"==typeof n?n.apply(this,[]):"function"==typeof window[n]&&window[n].apply(this,[]),n=null)},null!=s){var l={struct:"loadStruct",data:"load"};for(var a in s)1==s[a]&&(t[l[a]]=function(){return this._loadData.apply(this,arguments)})}t=null}),"undefined"==typeof window.dhx4._eventable&&(window.dhx4._eventable=function(t,e){return"clear"==e?(t.detachAllEvents(),t.dhxevs=null,t.attachEvent=null,t.detachEvent=null,t.checkEvent=null,t.callEvent=null,t.detachAllEvents=null,void(t=null)):(t.dhxevs={data:{}},t.attachEvent=function(t,e){t=String(t).toLowerCase(),this.dhxevs.data[t]||(this.dhxevs.data[t]={});var n=window.dhx4.newId();return this.dhxevs.data[t][n]=e,n},t.detachEvent=function(t){for(var e in this.dhxevs.data){var n=0;for(var i in this.dhxevs.data[e])i==t?(this.dhxevs.data[e][i]=null,delete this.dhxevs.data[e][i]):n++;0==n&&(this.dhxevs.data[e]=null,delete this.dhxevs.data[e])}},t.checkEvent=function(t){return t=String(t).toLowerCase(),null!=this.dhxevs.data[t]},t.callEvent=function(t,e){if(t=String(t).toLowerCase(),null==this.dhxevs.data[t])return!0;var n=!0;for(var i in this.dhxevs.data[t])n=this.dhxevs.data[t][i].apply(this,e)&&n;return n},t.detachAllEvents=function(){for(var t in this.dhxevs.data){for(var e in this.dhxevs.data[t])this.dhxevs.data[t][e]=null,delete this.dhxevs.data[t][e];this.dhxevs.data[t]=null,delete this.dhxevs.data[t]}},void(t=null))},dhx4._eventable(dhx4)),window.dhtmlxValidation||(dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(t){return""==t},isNotEmpty:function(t){return t instanceof Array?t.length>0:""==!t},isValidBoolean:function(t){return!!t.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(t){return!!t.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(t){return!!t.toString().match(/(^-?\d+$)/)},isValidNumeric:function(t){return!!t.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(t){return!!t.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31&&e[4]<=59&&e[5]<=59&&e[6]<=59)||!1},isValidDate:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31)||!1},isValidTime:function(t){var e=t.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return e&&!!(e[1]<=24&&e[2]<=59&&e[3]<=59)||!1},isValidIPv4:function(t){var e=t.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return e&&!!(e[1]<=255&&e[2]<=255&&e[3]<=255&&e[4]<=255)||!1},isValidCurrency:function(t){return t.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&!0||!1},isValidSSN:function(t){return t.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},isValidSIN:function(t){return t.toString().match(/^\d{9}$/)&&!0||!1}},dhtmlxValidation=new dhtmlxValidation),"undefined"==typeof window.dhtmlx&&(window.dhtmlx={extend:function(t,e){for(var n in e)t[n]||(t[n]=e[n]);return t},extend_api:function(t,e,n){var i=window[t];i&&(window[t]=function(t){if(t&&"object"==typeof t&&!t.tagName){var n=i.apply(this,e._init?e._init(t):arguments);for(var s in dhtmlx)e[s]&&this[e[s]](dhtmlx[s]);for(var s in t)e[s]?this[e[s]](t[s]):0===s.indexOf("on")&&this.attachEvent(s,t[s])}else var n=i.apply(this,arguments);return e._patch&&e._patch(this),n||this},window[t].prototype=i.prototype,n&&dhtmlx.extend(window[t].prototype,n))},url:function(t){return-1!=t.indexOf("?")?"&":"?"}}),dhtmlDragAndDropObject.prototype.removeDraggableItem=function(t){t.onmousedown=null,t.dragStarter=null,t.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(t,e){t.onmousedown=this.preCreateDragCopy,t.dragStarter=e,this.addDragLanding(t,e)},dhtmlDragAndDropObject.prototype.addDragLanding=function(t,e){t.dragLanding=e},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(t){return!t&&!window.event||2!=(t||event).button?window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(t),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),t&&t.preventDefault?(t.preventDefault(),!1):!1):void 0},dhtmlDragAndDropObject.prototype.callDrag=function(t){if(t||(t=window.event),dragger=window.dhtmlDragAndDrop,!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(!dragger.waitDrag)return dragger.stopDrag(t,!0);if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,t),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var e=dragger.gldragNode;dragger.gldragNode.old&&(e=dragger.gldragNode.old),e.parentNode.removeChild(e);var n=dragger.dragNode.pWindow;if(e.pWindow&&e.pWindow.dhtmlDragAndDrop.lastLanding&&e.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(e.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var i=document.createElement("Div");i.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=i.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),n.dhtmlDragAndDrop.dragNode=dragger.dragNode}if(dragger.dragNode.style.left=t.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=t.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",t.srcElement)s=t.srcElement;else var s=t.target;dragger.checkLanding(s,t)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(t){if(window.name){for(var e=parent.frames[window.name].frameElement.offsetParent,n=0,i=0;e;)n+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;if(parent.dhtmlDragAndDrop){var s=parent.dhtmlDragAndDrop.calculateFramePosition(1);n+=1*s.split("_")[0],i+=1*s.split("_")[1]}if(t)return n+"_"+i;this.fx=n,this.fy=i}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(t,e){t&&t.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=t,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,e.clientX,e.clientY,e),this.lastLanding_scr=_isIE?e.srcElement:e.target):t&&"BODY"!=t.tagName?this.checkLanding(t.parentNode,e):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,e.clientX,e.clientY,e),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(t,e){if(dragger=window.dhtmlDragAndDrop,!e){dragger.stopFrameRoute();var n=dragger.lastLanding;dragger.lastLanding=null,n&&n.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,n,_isIE?event.srcElement:t.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(t){t&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var e=0;e<window.frames.length;e++)try{window.frames[e]!=t&&window.frames[e].dhtmlDragAndDrop&&window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}catch(n){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(n){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(t,e){t&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=t.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=t.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=t.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=t.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&e&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(n){}for(var i=0;i<window.frames.length;i++)try{window.frames[i]!=t&&window.frames[i].dhtmlDragAndDrop&&window.frames[i].dhtmlDragAndDrop.initFrameRoute(window,!t||e?1:0)}catch(n){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||-1!=navigator.appVersion.indexOf("MSIE 10.0")||document.documentMode>7)&&"BackCompat"!=document.compatMode&&(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),"undefined"==typeof window.dhtmlxEvent,null==dhtmlxEvent.touchDelay&&(dhtmlxEvent.touchDelay=2e3),"undefined"==typeof dhtmlxEvent.initTouch&&(dhtmlxEvent.initTouch=function(){function t(){if(n){var t=document.createEvent("HTMLEvents");t.initEvent("dblclick",!0,!0),n.dispatchEvent(t),e=n=null}}var e,n,i,s;dhtmlxEvent(document.body,"touchstart",function(a){n=a.touches[0].target,i=a.touches[0].clientX,s=a.touches[0].clientY,e=window.setTimeout(t,dhtmlxEvent.touchDelay)}),dhtmlxEvent(document.body,"touchmove",function(t){e&&(Math.abs(t.touches[0].clientX-i)>50||Math.abs(t.touches[0].clientY-s)>50)&&(window.clearTimeout(e),e=n=!1)}),dhtmlxEvent(document.body,"touchend",function(t){e&&(window.clearTimeout(e),e=n=!1)}),dhtmlxEvent.initTouch=function(){}}),dhtmlXCalendarObject.prototype.lang="en",dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,weekname:"w"}},dhtmlXCalendarObject.prototype._buildMonthHdr=function(t){var e=this,n=function(t){return 1==String(t).length?"0"+String(t):t},i=function(t,e){return"<span class='dhtmlxcalendar_month_label_"+t+"'>"+e+"</span>"},s=String(this.langData[this.lang].hdrformat||"%F %Y").replace(/%[a-z]/gi,function(s){switch(s){case"%m":return i("month",n(t.getMonth()+1));case"%n":return i("month",t.getMonth()+1);case"%M":return i("month",e.langData[e.lang].monthesSNames[t.getMonth()]);case"%F":return i("month",e.langData[e.lang].monthesFNames[t.getMonth()]);case"%y":return i("year",n(t.getYear()%100));case"%Y":return i("year",t.getFullYear());case"%%":return"%";default:return s}});return e=n=i=null,s},dhtmlXCalendarObject.prototype.enableIframe=function(t){1==t?this._ifr||(this._ifr=document.createElement("IFRAME"),this._ifr.frameBorder=0,this._ifr.border=0,this._ifr.setAttribute("src","javascript:false;"),this._ifr.className="dhtmlxcalendar_ifr",this._ifr.onload=function(){this.onload=null,this.contentWindow.document.open("text/html","replace"),this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")},this.base.parentNode.insertBefore(this._ifr,this.base),this._ifrSize()):this._ifr&&(this._ifr.parentNode.removeChild(this._ifr),this._ifr=null)},dhtmlXCalendarObject.prototype._ifrSize=function(){this._ifr&&(this._ifr.style.left=this.base.style.left,this._ifr.style.top=this.base.style.top,this._ifr.style.width=this.base.offsetWidth+"px",this._ifr.style.height=this.base.offsetHeight+"px")},dhtmlxCalendarObject=dhtmlXCalendarObject,dhtmlXCalendarObject.prototype._dateStrings=function(){var t=this.langData[this.lang];return{monthFullName:t.monthesFNames,monthShortName:t.monthesSNames,dayFullName:t.daysFNames,dayShortName:t.daysSNames}},dhtmlXCalendarObject.prototype._strToDate=function(t,e){return window.dhx4.str2date(t,e||this._dateFormat,this._dateStrings())},dhtmlXCalendarObject.prototype._dateToStr=function(t,e){return window.dhx4.date2str(t,e||this._dateFormat,this._dateStrings())},window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(t){var e=this;return this.leftCalendar=new dhtmlXCalendarObject(t),this.leftCalendar.hideTime(),this.rightCalendar=new dhtmlXCalendarObject(t),this.rightCalendar.hideTime(),this.leftCalendar.attachEvent("onClick",function(t){e._updateRange("rightCalendar",t,null),e._evOnClick(["left",t])}),this.rightCalendar.attachEvent("onClick",function(t){e._updateRange("leftCalendar",null,t),e._evOnClick(["right",t])}),this.leftCalendar.attachEvent("onBeforeChange",function(t){return e._evOnBeforeChange(["left",t])}),this.rightCalendar.attachEvent("onBeforeChange",function(t){return e._evOnBeforeChange(["right",t])}),this.show=function(){this.leftCalendar.show(),this.rightCalendar.base.style.marginLeft=this.leftCalendar.base.offsetWidth-1+"px",this.rightCalendar.show()},this.hide=function(){this.leftCalendar.hide(),this.rightCalendar.hide()},this.setDateFormat=function(t){this.leftCalendar.setDateFormat(t),this.rightCalendar.setDateFormat(t)},this.setDates=function(t,e){null!=t&&this.leftCalendar.setDate(t),null!=e&&this.rightCalendar.setDate(e),this._updateRange()},this._updateRange=function(t,e,n){3==arguments.length?("leftCalendar"==t?this.leftCalendar:this.rightCalendar).setSensitiveRange(e,n):(this.leftCalendar.setSensitiveRange(null,this.rightCalendar.getDate()),this.rightCalendar.setSensitiveRange(this.leftCalendar.getDate(),null))},this.getFormatedDate=function(){return this.leftCalendar.getFormatedDate.apply(this.leftCalendar,arguments)},this.unload=function(){window.dhx4._eventable(this,"clear"),this.leftCalendar.unload(),this.rightCalendar.unload(),this.leftCalendar=this.rightCalendar=null,this._updateRange=null,this._evOnClick=null,this._evOnBeforeChange=null,this.show=null,this.hide=null,this.setDateFormat=null,this.setDates=null,this.getFormatedDate=null,this.unload=null,e=null},this._evOnClick=function(t){return this.callEvent("onClick",t)},this._evOnBeforeChange=function(t){return this.callEvent("onBeforeChange",t)},window.dhx4._eventable(this),this};